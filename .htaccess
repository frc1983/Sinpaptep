RewriteEngine on

# Redirect root to frontend
RewriteRule ^$ frontend/web/ [L]
RewriteRule (.*) frontend/web/$1 [L]

# Security: Prevent access to sensitive directories
RewriteRule ^(backend|common|console|environments|vagrant|tests)/ - [F,L]

# Prevent access to configuration files
<FilesMatch "\.(env|local|dev|prod|test)\.php$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Prevent access to composer files
<FilesMatch "composer\.(json|lock)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Prevent access to version control files
<FilesMatch "\.(git|svn|hg|bzr)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Prevent access to backup files
<FilesMatch "\.(bak|backup|old|orig|save|swp|tmp)$">
    Order allow,deny
    Deny from all
</FilesMatch> 